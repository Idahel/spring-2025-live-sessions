{"{\"assumptions\":{},\"sourceRoot\":\"/Users/jennie/Desktop/New Folder With Items/magi/spring-25/spring-2025-live-sessions/week-20/flowers-backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jennie/Desktop/New Folder With Items/magi/spring-25/spring-2025-live-sessions/week-20/flowers-backend\",\"filename\":\"/Users/jennie/Desktop/New Folder With Items/magi/spring-25/spring-2025-live-sessions/week-20/flowers-backend/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jennie/Desktop/New Folder With Items/magi/spring-25/spring-2025-live-sessions/week-20/flowers-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.27.4:development":{"value":{"code":"import cors from \"cors\";\nimport express from \"express\";\nimport listEndpoints from \"express-list-endpoints\";\nimport mongoose from \"mongoose\";\nimport flowerData from \"./data/flowers.json\";\nconst mongoUrl = process.env.MONGO_URL || \"mongodb://localhost/flowers-tuesday-session\";\nmongoose.connect(mongoUrl);\nconst port = process.env.PORT || 8080;\nconst app = express();\napp.use(cors());\napp.use(express.json());\nconst flowerSchema = new mongoose.Schema({\n  id: Number,\n  name: {\n    type: String,\n    required: true\n  },\n  scientificName: String,\n  botanicalFamily: String,\n  color: String,\n  isSpotted: {\n    type: Boolean,\n    default: true\n  },\n  scent: String,\n  size: {\n    type: String,\n    enum: [\"Small\", \"Medium\", \"Large\"]\n  },\n  symbolism: [String],\n  lastSpottedTimestamp: {\n    type: Date,\n    default: Date.now\n  }\n});\nconst Flower = mongoose.model(\"Flower\", flowerSchema);\nif (process.env.RESET_DB) {\n  const seedDatabase = async () => {\n    await Flower.deleteMany({});\n    flowerData.forEach(flower => {\n      new Flower(flower).save();\n    });\n  };\n  seedDatabase();\n}\napp.get(\"/\", (req, res) => {\n  const endpoints = listEndpoints(app);\n  res.json({\n    message: \"Welcome to the Flower API\",\n    endpoints: endpoints\n  });\n});\napp.get(\"/flowers\", async (req, res) => {\n  const {\n    color,\n    symbol\n  } = req.query;\n\n  //localhost:8080/flowers?color=Red&symbol=love&page=2\n  // let filteredFlowers = await Flower.find()\n\n  const query = {};\n  if (color) {\n    query.color = color;\n  }\n  if (symbol) {\n    query.symbolism = symbol;\n  }\n  try {\n    const filteredFlowers = await Flower.find(query);\n    if (filteredFlowers.length === 0) {\n      return res.status(404).json({\n        success: false,\n        response: [],\n        message: \"No flowers found for that query. Try another one.\"\n      });\n    }\n    res.status(200).json({\n      success: true,\n      response: filteredFlowers,\n      message: \"Success\"\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error,\n      message: \"Failed to fetch flowers\"\n    });\n  }\n});\napp.get(\"/flowers/:id\", async (req, res) => {\n  const {\n    id\n  } = req.params;\n  //localhost:8080/flowers/${id}\n\n  try {\n    const flower = await Flower.findById(id);\n    if (!flower) {\n      return res.status(404).json({\n        success: false,\n        response: null,\n        message: \"Flower not found\"\n      });\n    }\n    res.status(200).json({\n      success: true,\n      response: flower\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error,\n      message: \"Flower couldn't be found\"\n    });\n  }\n});\napp.post(\"/flowers\", async (req, res) => {\n  const {\n    name,\n    color\n  } = req.body;\n  try {\n    const newFlower = await new Flower({\n      name,\n      color\n    }).save();\n    res.status(201).json({\n      success: true,\n      response: newFlower,\n      message: \"Flower created successfully\"\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error,\n      //Be careful when returning error messages to the client, so that you don't expose sensitive information\n      message: \"Couldn't create flower\"\n    });\n  }\n});\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3JzIiwiZXhwcmVzcyIsImxpc3RFbmRwb2ludHMiLCJtb25nb29zZSIsImZsb3dlckRhdGEiLCJtb25nb1VybCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkwiLCJjb25uZWN0IiwicG9ydCIsIlBPUlQiLCJhcHAiLCJ1c2UiLCJqc29uIiwiZmxvd2VyU2NoZW1hIiwiU2NoZW1hIiwiaWQiLCJOdW1iZXIiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwic2NpZW50aWZpY05hbWUiLCJib3RhbmljYWxGYW1pbHkiLCJjb2xvciIsImlzU3BvdHRlZCIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwic2NlbnQiLCJzaXplIiwiZW51bSIsInN5bWJvbGlzbSIsImxhc3RTcG90dGVkVGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIkZsb3dlciIsIm1vZGVsIiwiUkVTRVRfREIiLCJzZWVkRGF0YWJhc2UiLCJkZWxldGVNYW55IiwiZm9yRWFjaCIsImZsb3dlciIsInNhdmUiLCJnZXQiLCJyZXEiLCJyZXMiLCJlbmRwb2ludHMiLCJtZXNzYWdlIiwic3ltYm9sIiwicXVlcnkiLCJmaWx0ZXJlZEZsb3dlcnMiLCJmaW5kIiwibGVuZ3RoIiwic3RhdHVzIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiZXJyb3IiLCJwYXJhbXMiLCJmaW5kQnlJZCIsInBvc3QiLCJib2R5IiwibmV3Rmxvd2VyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2plbm5pZS9EZXNrdG9wL05ldyBGb2xkZXIgV2l0aCBJdGVtcy9tYWdpL3NwcmluZy0yNS9zcHJpbmctMjAyNS1saXZlLXNlc3Npb25zL3dlZWstMjAvZmxvd2Vycy1iYWNrZW5kLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCJcbmltcG9ydCBsaXN0RW5kcG9pbnRzIGZyb20gXCJleHByZXNzLWxpc3QtZW5kcG9pbnRzXCJcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIlxuXG5pbXBvcnQgZmxvd2VyRGF0YSBmcm9tIFwiLi9kYXRhL2Zsb3dlcnMuanNvblwiXG5cbmNvbnN0IG1vbmdvVXJsID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMIHx8IFwibW9uZ29kYjovL2xvY2FsaG9zdC9mbG93ZXJzLXR1ZXNkYXktc2Vzc2lvblwiXG5tb25nb29zZS5jb25uZWN0KG1vbmdvVXJsKVxuXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwXG5jb25zdCBhcHAgPSBleHByZXNzKClcblxuYXBwLnVzZShjb3JzKCkpXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKVxuXG5jb25zdCBmbG93ZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgaWQ6IE51bWJlcixcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBzY2llbnRpZmljTmFtZTogU3RyaW5nLFxuICBib3RhbmljYWxGYW1pbHk6IFN0cmluZyxcbiAgY29sb3I6IFN0cmluZyxcbiAgaXNTcG90dGVkOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIHNjZW50OiBTdHJpbmcsXG4gIHNpemU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogW1wiU21hbGxcIiwgXCJNZWRpdW1cIiwgXCJMYXJnZVwiXVxuICB9LFxuICBzeW1ib2xpc206IFtTdHJpbmddLFxuICBsYXN0U3BvdHRlZFRpbWVzdGFtcDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfVxufSlcblxuY29uc3QgRmxvd2VyID0gbW9uZ29vc2UubW9kZWwoXCJGbG93ZXJcIiwgZmxvd2VyU2NoZW1hKVxuXG5pZiAocHJvY2Vzcy5lbnYuUkVTRVRfREIpIHtcbiAgY29uc3Qgc2VlZERhdGFiYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IEZsb3dlci5kZWxldGVNYW55KHt9KVxuICAgIGZsb3dlckRhdGEuZm9yRWFjaChmbG93ZXIgPT4ge1xuICAgICAgbmV3IEZsb3dlcihmbG93ZXIpLnNhdmUoKVxuICAgIH0pXG4gIH1cbiAgc2VlZERhdGFiYXNlKClcbn1cblxuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGVuZHBvaW50cyA9IGxpc3RFbmRwb2ludHMoYXBwKVxuICByZXMuanNvbih7XG4gICAgbWVzc2FnZTogXCJXZWxjb21lIHRvIHRoZSBGbG93ZXIgQVBJXCIsXG4gICAgZW5kcG9pbnRzOiBlbmRwb2ludHNcbiAgfSlcbn0pXG5cbmFwcC5nZXQoXCIvZmxvd2Vyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBjb2xvciwgc3ltYm9sIH0gPSByZXEucXVlcnlcblxuICAvL2xvY2FsaG9zdDo4MDgwL2Zsb3dlcnM/Y29sb3I9UmVkJnN5bWJvbD1sb3ZlJnBhZ2U9MlxuICAvLyBsZXQgZmlsdGVyZWRGbG93ZXJzID0gYXdhaXQgRmxvd2VyLmZpbmQoKVxuXG4gIGNvbnN0IHF1ZXJ5ID0ge31cblxuICBpZiAoY29sb3IpIHtcbiAgICBxdWVyeS5jb2xvciA9IGNvbG9yXG4gIH1cblxuICBpZiAoc3ltYm9sKSB7XG4gICAgcXVlcnkuc3ltYm9saXNtID0gc3ltYm9sXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGZpbHRlcmVkRmxvd2VycyA9IGF3YWl0IEZsb3dlci5maW5kKHF1ZXJ5KVxuXG4gICAgaWYgKGZpbHRlcmVkRmxvd2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICByZXNwb25zZTogW10sXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gZmxvd2VycyBmb3VuZCBmb3IgdGhhdCBxdWVyeS4gVHJ5IGFub3RoZXIgb25lLlwiXG4gICAgICB9KVxuICAgIH1cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVzcG9uc2U6IGZpbHRlcmVkRmxvd2VycyxcbiAgICAgIG1lc3NhZ2U6IFwiU3VjY2Vzc1wiXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHJlc3BvbnNlOiBlcnJvcixcbiAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGZsb3dlcnNcIlxuICAgIH0pXG4gIH1cbn0pXG5cbmFwcC5nZXQoXCIvZmxvd2Vycy86aWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXNcbiAgLy9sb2NhbGhvc3Q6ODA4MC9mbG93ZXJzLyR7aWR9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBmbG93ZXIgPSBhd2FpdCBGbG93ZXIuZmluZEJ5SWQoaWQpXG5cbiAgICBpZiAoIWZsb3dlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICByZXNwb25zZTogbnVsbCxcbiAgICAgICAgbWVzc2FnZTogXCJGbG93ZXIgbm90IGZvdW5kXCJcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlOiBmbG93ZXJcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgcmVzcG9uc2U6IGVycm9yLCBcbiAgICAgIG1lc3NhZ2U6IFwiRmxvd2VyIGNvdWxkbid0IGJlIGZvdW5kXCJcbiAgICB9KVxuICB9XG59KVxuXG5hcHAucG9zdChcIi9mbG93ZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5hbWUsIGNvbG9yIH0gPSByZXEuYm9keVxuXG4gIHRyeSB7XG4gICAgY29uc3QgbmV3Rmxvd2VyID0gYXdhaXQgbmV3IEZsb3dlcih7IG5hbWUsIGNvbG9yIH0pLnNhdmUoKVxuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlOiBuZXdGbG93ZXIsXG4gICAgICBtZXNzYWdlOiBcIkZsb3dlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHJlc3BvbnNlOiBlcnJvciwgLy9CZSBjYXJlZnVsIHdoZW4gcmV0dXJuaW5nIGVycm9yIG1lc3NhZ2VzIHRvIHRoZSBjbGllbnQsIHNvIHRoYXQgeW91IGRvbid0IGV4cG9zZSBzZW5zaXRpdmUgaW5mb3JtYXRpb25cbiAgICAgIG1lc3NhZ2U6IFwiQ291bGRuJ3QgY3JlYXRlIGZsb3dlclwiXG4gICAgfSlcbiAgfVxufSlcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKVxufSlcbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsSUFBSSxNQUFNLE1BQU07QUFDdkIsT0FBT0MsT0FBTyxNQUFNLFNBQVM7QUFDN0IsT0FBT0MsYUFBYSxNQUFNLHdCQUF3QjtBQUNsRCxPQUFPQyxRQUFRLE1BQU0sVUFBVTtBQUUvQixPQUFPQyxVQUFVLE1BQU0scUJBQXFCO0FBRTVDLE1BQU1DLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVMsSUFBSSw2Q0FBNkM7QUFDdkZMLFFBQVEsQ0FBQ00sT0FBTyxDQUFDSixRQUFRLENBQUM7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","map":{"version":3,"names":["cors","express","listEndpoints","mongoose","flowerData","mongoUrl","process","env","MONGO_URL","connect","port","PORT","app","use","json","flowerSchema","Schema","id","Number","name","type","String","required","scientificName","botanicalFamily","color","isSpotted","Boolean","default","scent","size","enum","symbolism","lastSpottedTimestamp","Date","now","Flower","model","RESET_DB","seedDatabase","deleteMany","forEach","flower","save","get","req","res","endpoints","message","symbol","query","filteredFlowers","find","length","status","success","response","error","params","findById","post","body","newFlower","listen","console","log"],"sourceRoot":"/Users/jennie/Desktop/New Folder With Items/magi/spring-25/spring-2025-live-sessions/week-20/flowers-backend/","sources":["server.js"],"sourcesContent":["import cors from \"cors\"\nimport express from \"express\"\nimport listEndpoints from \"express-list-endpoints\"\nimport mongoose from \"mongoose\"\n\nimport flowerData from \"./data/flowers.json\"\n\nconst mongoUrl = process.env.MONGO_URL || \"mongodb://localhost/flowers-tuesday-session\"\nmongoose.connect(mongoUrl)\n\nconst port = process.env.PORT || 8080\nconst app = express()\n\napp.use(cors())\napp.use(express.json())\n\nconst flowerSchema = new mongoose.Schema({\n  id: Number,\n  name: {\n    type: String,\n    required: true\n  },\n  scientificName: String,\n  botanicalFamily: String,\n  color: String,\n  isSpotted: {\n    type: Boolean,\n    default: true\n  },\n  scent: String,\n  size: {\n    type: String,\n    enum: [\"Small\", \"Medium\", \"Large\"]\n  },\n  symbolism: [String],\n  lastSpottedTimestamp: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nconst Flower = mongoose.model(\"Flower\", flowerSchema)\n\nif (process.env.RESET_DB) {\n  const seedDatabase = async () => {\n    await Flower.deleteMany({})\n    flowerData.forEach(flower => {\n      new Flower(flower).save()\n    })\n  }\n  seedDatabase()\n}\n\napp.get(\"/\", (req, res) => {\n  const endpoints = listEndpoints(app)\n  res.json({\n    message: \"Welcome to the Flower API\",\n    endpoints: endpoints\n  })\n})\n\napp.get(\"/flowers\", async (req, res) => {\n  const { color, symbol } = req.query\n\n  //localhost:8080/flowers?color=Red&symbol=love&page=2\n  // let filteredFlowers = await Flower.find()\n\n  const query = {}\n\n  if (color) {\n    query.color = color\n  }\n\n  if (symbol) {\n    query.symbolism = symbol\n  }\n\n  try {\n    const filteredFlowers = await Flower.find(query)\n\n    if (filteredFlowers.length === 0) {\n      return res.status(404).json({\n        success: false,\n        response: [],\n        message: \"No flowers found for that query. Try another one.\"\n      })\n    }\n    res.status(200).json({\n      success: true,\n      response: filteredFlowers,\n      message: \"Success\"\n    })\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error,\n      message: \"Failed to fetch flowers\"\n    })\n  }\n})\n\napp.get(\"/flowers/:id\", async (req, res) => {\n  const { id } = req.params\n  //localhost:8080/flowers/${id}\n\n  try {\n    const flower = await Flower.findById(id)\n\n    if (!flower) {\n      return res.status(404).json({ \n        success: false,\n        response: null,\n        message: \"Flower not found\"\n      })\n    }\n\n    res.status(200).json({\n      success: true,\n      response: flower\n    })\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error, \n      message: \"Flower couldn't be found\"\n    })\n  }\n})\n\napp.post(\"/flowers\", async (req, res) => {\n  const { name, color } = req.body\n\n  try {\n    const newFlower = await new Flower({ name, color }).save()\n\n    res.status(201).json({\n      success: true,\n      response: newFlower,\n      message: \"Flower created successfully\"\n    })\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error, //Be careful when returning error messages to the client, so that you don't expose sensitive information\n      message: \"Couldn't create flower\"\n    })\n  }\n})\n\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`)\n})\n"],"mappings":"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","ignoreList":[]}},"mtime":1749540638461}}